<div class="container">
  <div class="columns">
    <div class="column is-12">
      <h1 class="title">Texas Method</h1>
      <h2 class="subtitle">https://www.t-nation.com/training/texas-method</h2>
    </div>
  </div>

  <div class="columns">
    <div id="volume" class="column is-4">
      <h1 class="title">Monday</h1>
      <h2 class="subtitle">Volume Day</h2>
      <table class="table">
        <tbody>
          <tr>
            <td><strong>Squat</strong> (5x5 @ 90% 5RM)</td>
            <td>{{squat}}lbs</td>
          </tr>
          <tr>
            <td>*<strong>Bench Press</strong> (5x5 @ 90% 5RM)</td>
            <td>{{bench_press}}lbs</td>
          </tr>
          <tr>
            <td>*<strong>Overhead Press</strong> (5x5 @ 90% 5RM)</td>
            <td>{{overhead_press}}lbs</td>
          </tr>
          <tr>
            <td><strong>Barbell Row</strong> (5x3 or 6x2)</td>
            <td>{{barbell_row}}</td>
          </tr>
        </tbody>
      </table>
      <p class="content is-small">*Complete either Bench Press or Overhead Press.</p>
    </div>

    <div className="column is-4">
      <%= react_component('RecoveryDay', squat: @squat, bench_press: @bench_press, overhead_press: @overhead_press) %>
    </div>

    <div class="column is-4">
      <h1 class="title">Friday</h1>
      <h2 class="subtitle">Intensity Day</h2>
      <table class="table">
        <tbody>
          <tr>
            <td><strong>Squat</strong> (1x5 @ new 5RM)</td>
            <td><%= @squat + 5 %>lbs</td>
          </tr>
          <tr>
            <td>*<strong>Bench Press</strong> (1x5 @ new 5RM)</td>
            <td><%= @bench_press + 5 %>lbs</td>
          </tr>
          <tr>
            <td>*<strong>Overhead Press</strong> (1x5 @ new 5RM)</td>
            <td><%= @overhead_press + 5 %>lbs</td>
          </tr>
          <tr>
            <td><strong>Deadlift</strong> (1x5 @ new 5RM)</td>
            <td><%= rounded(@deadlift + 5) %>lbs</td>
          </tr>
        </tbody>
      </table>
      <p class="content is-small">*Complete either Bench Press or Overhead Press. Match the exercise from Monday.</p>
    </div>
  </div>

  <div class="columns">
    <div class="column is-6 is-offset-3">
      <%= form_tag texas_method_programs_path, method: :get do %>
        <%= label_tag :bench_press, nil, class: 'label' %>
        <%= number_field_tag :bench_press, @bench_press, placeholder: 'Bench Press', class: 'input' %>
        <%= label_tag :barbell_row, nil, class: 'label' %>
        <%= number_field_tag :barbell_row, @barbell_row, placeholder: 'Barbell Row', class: 'input' %>
        <%= label_tag :deadlift, nil, class: 'label' %>
        <%= number_field_tag :deadlift, @deadlift, placeholder: 'Deadlift', class: 'input' %>
        <%= label_tag :overhead_press, nil, class: 'label' %>
        <%= number_field_tag :overhead_press, @overhead_press, placeholder: 'Overhead Press', class: 'input' %>
        <%= label_tag :squat, nil, class: 'label' %>
        <%= number_field_tag :squat, @squat, placeholder: 'Squat', class: 'input' %>
        <%= submit_tag "Submit", class: 'button is-primary is-fullwidth' %>
      <% end %>
    </div>
  </div>
</div>

<% content_for :javascript do %>
  $(function(){
    window.volume = new Vue({
      el: '#volume',
      data: {
        squat_pr: <%= @squat %>,
        bench_press_pr: <%= @bench_press %>,
        overhead_press_pr: <%= @overhead_press %>,
        barbell_row: 0,
      },
      computed: {
        squat: function() { return this.rounded(this.squat_pr * 0.9); },
        bench_press: function() { return this.rounded(this.bench_press_pr * 0.9); },
        overhead_press: function() { return this.rounded(this.overhead_press_pr * 0.9); },
      },
      methods: {
        rounded: function(n) { return n - n % 5; }
      }
    });
  });
<% end %>
